<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- 1. Link your Tailwind CSS file -->
    <link rel="stylesheet" href="./menu_tailwind.css"/>
  </head>

<body class="w-[500px] h-[600px] overflow-hidden">
  <div id="popup-content" class="flex flex-col gap-0 h-full">
    
    <!-- Title Section -->
    <div>
      <p id="instruction" class="underline underline-offset-1 m-0 text-center text-base font-semibold">Eztypr for Google Docs</p>
      
      <!-- HIGHLIGHTING CONTAINER START -->
      <div class="relative w-[98%] mx-auto my-[3%] h-[250px]">
        
        <!-- Backdrop (Highlights) -->
        <div 
          id="backdrop"
          class="absolute inset-0 z-0 h-full w-full overflow-hidden border border-transparent font-mono text-[10px] text-transparent whitespace-pre-wrap break-words pointer-events-none"
          aria-hidden="true"
        ></div>

        <!-- Textarea (Input) -->
        <textarea 
          id="text-to-write" 
          name="text" 
          wrap="soft" 
          class="absolute inset-0 z-10 h-full w-full resize-none border border-gray-300 bg-transparent font-mono text-[10px] text-black focus:outline-none focus:ring-2 focus:ring-blue-300 overflow-auto"
          spellcheck="false"
        ></textarea>
        
      </div>
      <!-- HIGHLIGHTING CONTAINER END -->
    </div>
    
    <dialog id="err-dialog"
      class="fixed inset-0 z-[9999] m-0 max-w-none w-screen h-screen p-0 bg-transparent
             backdrop:bg-black/60 backdrop:backdrop-blur-sm">
      <div class="min-h-full w-full grid place-items-center p-4">
        <div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl">
          <p class="text-sm text-gray-900">Need input</p>
    
          <form method="dialog" class="mt-4 flex justify-end">
            <button class="rounded bg-black px-3 py-2 text-white">OK</button>
          </form>
        </div>
      </div>
    </dialog>
    
    <!-- Controls Section -->
    <div class="flex flex-col items-center gap-0">
      <span class="text-center text-sm">Enter the delay per keypress (sec)</span>
      <span id="delay-print" class="text-center text-sm font-bold mt-1">0 milliseconds</span>
      
      <!-- Input Range Fix: Added h-4 and flex alignment -->
      <input id="delay-input" type="range" min="0" max="200" value="0" step="1"
        class="block w-[98%] mx-auto my-[3%] h-4 cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-300">
    </div>

    <!-- Button -->
    <button id="start-type" 
      class="border w-[98%] mx-auto py-2 text-center cursor-pointer bg-[#FBFBC9] hover:bg-[#CFF2F2] transition-colors rounded font-medium shadow-sm">
      Start Typing
    </button>

    <!-- Options Section -->
    <div class="px-2 mt-4 text-sm space-y-2">
      <!-- Option 1 -->
      <div class="block">
        <input type="checkbox" id="mistake" class="align-middle">
        <label for="mistake" class="ml-1 align-middle">Add mistakes</label>
        <div class="flex items-center space-x-2 hidden mt-1" id="mistake-intensity-slider">
          <input id="mistake-intensity-input" type="range" class="h-2 w-24 cursor-pointer" step="1" min="0" max="100" value="0">
          <span class="text-xs" id="mistake-intensity-print">0% intensity</span>
        </div>
      </div>
      
      <!-- Option 2 -->
      <div class="block">
        <input type="checkbox" id="misspell" class="align-middle">
        <label for="misspell" class="ml-1 align-middle">Misspell long words (more then 6 letters)</label>
      </div>
      
      <!-- Option 3 -->
      <div class="block">
        <input type="checkbox" id="random_delay" class="align-middle">
        <label for="random_delay" class="ml-1 align-middle">Add random delay on top</label>
        <div class="flex items-center space-x-2 hidden mt-1" id="random-delay-slider">
          <input id="random-delay-input" type="range" class="h-2 w-24 cursor-pointer" min="0" max="60" value="0">
          <span class="text-xs" id="random-delay-print">0 seconds</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 2. Logic Files -->
  <script src="highlighter.js"></script>
  <script src="menu.js"></script>
</body>
</html>
